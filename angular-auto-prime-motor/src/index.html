<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Cadastro de Funcionários</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .error { color: red; font-size: 14px; }
  </style>
</head>
<body>
  <header>
    <h1>Auto Prime - Cadastros</h1>
  </header>

  <div class="container">
    <!-- Menu lateral -->
    <nav class="sidebar">
      <ul>
        <li><a href="#">Dashboard</a></li>
        <li><a href="#">Cadastro de Pessoa</a></li>
        <li><a href="#">Listar Funcionários</a></li>
        <li><a href="#">Relatórios</a></li>
      </ul>
    </nav>

    <!-- Conteúdo principal -->
    <main class="content">
      <!-- Formulário de cadastro -->
      <section class="form-section">
        <h2>Cadastro de Pessoa</h2>
        <form id="cadastroForm">
          <label>Nome:</label>
          <input type="text" id="nome" required minlength="3" placeholder="Nome completo">

          <label>CPF:</label>
          <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14" required>
          <div id="cpfErro" class="error"></div>

          <label>Email:</label>
          <input type="email" id="email" placeholder="email@empresa.com" required>

          <label>Telefone:</label>
          <input type="text" id="telefone" maxlength="15" placeholder="(11) 99999-9999">

          <label>Data de Admissão:</label>
          <input type="date" id="dataAdmissao" required>

          <label>Salário:</label>
          <input type="number" id="salario" step="0.01" min="1000" required>

          <label>Endereço:</label>
          <textarea id="endereco" placeholder="Endereço completo"></textarea>

          <button type="submit">Salvar</button>
        </form>
      </section>

      <!-- Listagem de funcionários -->
      <section class="list-section">
        <h2>Lista de Funcionários</h2>
        <input type="text" placeholder="Pesquisar por nome, setor ou cargo..." class="search">

        <table>
          <thead>
            <tr>
              <th>Nome</th>
              <th>CPF</th>
              <th>Cargo</th>
              <th>Setor</th>
              <th>Data de Admissão</th>
              <th>Salário</th>
              <th>Email</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Maria Silva</td>
              <td>123.456.789-00</td>
              <td>Analista</td>
              <td>RH</td>
              <td>10/01/2023</td>
              <td>R$ 4.500,00</td>
              <td>maria@empresa.com</td>
              <td>
                <button class="edit">Editar</button>
                <button class="delete">Excluir</button>
              </td>
            </tr>
            <!-- outros registros aqui -->
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- Scripts de validação -->
  <script>
    // 🔹 Nome: só letras e espaços
    document.getElementById("nome").addEventListener("input", (e) => {
      e.target.value = e.target.value.replace(/[^a-zA-ZÀ-ÿ\s]/g, "");
    });

    // 🔹 CPF: máscara automática + só números
    const cpfInput = document.getElementById("cpf");
    cpfInput.addEventListener("input", () => {
      let v = cpfInput.value.replace(/\D/g, ""); // só números
      v = v.replace(/(\d{3})(\d)/, "$1.$2");
      v = v.replace(/(\d{3})(\d)/, "$1.$2");
      v = v.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
      cpfInput.value = v;
    });

    // 🔹 Telefone: máscara dinâmica
    const telInput = document.getElementById("telefone");
    telInput.addEventListener("input", () => {
      let v = telInput.value.replace(/\D/g, "");
      if (v.length > 10) {
        telInput.value = `(${v.slice(0,2)}) ${v.slice(2,7)}-${v.slice(7,11)}`;
      } else if (v.length > 6) {
        telInput.value = `(${v.slice(0,2)}) ${v.slice(2,6)}-${v.slice(6,10)}`;
      } else if (v.length > 2) {
        telInput.value = `(${v.slice(0,2)}) ${v.slice(2,6)}`;
      } else if (v.length > 0) {
        telInput.value = `(${v}`;
      }
    });

    // 🔹 E-mail: só permite caracteres válidos
    document.getElementById("email").addEventListener("input", (e) => {
      e.target.value = e.target.value.replace(/[^a-zA-Z0-9@._-]/g, "");
    });

    // 🔹 Endereço: permite letras, números, vírgula, ponto e espaço
    document.getElementById("endereco").addEventListener("input", (e) => {
      e.target.value = e.target.value.replace(/[^a-zA-ZÀ-ÿ0-9\s,.-]/g, "");
    });

    // 🔹 Validação CPF (dígito verificador)
    function validarCPF(cpf) {
      cpf = cpf.replace(/[^\d]+/g, "");
      if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;

      let soma = 0;
      for (let i = 0; i < 9; i++) soma += parseInt(cpf.charAt(i)) * (10 - i);
      let resto = 11 - (soma % 11);
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf.charAt(9))) return false;

      soma = 0;
      for (let i = 0; i < 10; i++) soma += parseInt(cpf.charAt(i)) * (11 - i);
      resto = 11 - (soma % 11);
      if (resto === 10 || resto === 11) resto = 0;
      return resto === parseInt(cpf.charAt(10));
    }

    // 🔹 Ao enviar formulário
    document.getElementById("cadastroForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const cpf = cpfInput.value;
      const cpfErro = document.getElementById("cpfErro");

      if (!validarCPF(cpf)) {
        cpfErro.textContent = "CPF inválido!";
        return;
      } else {
        cpfErro.textContent = "";
        alert("Funcionário cadastrado com sucesso!");
        e.target.reset();
      }
    });
  </script>
</body>
</html>
